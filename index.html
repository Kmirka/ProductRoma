<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü—Ä–æ–¥—É–∫—Ç–æ–≤–∏–π –º–∞–≥–∞–∑–∏–Ω ‚Äî –¥–µ–º–æ</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header>
    <div class="logo">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR1uKiE18qBLqKBfqZMlJK3ZUP2it_Jfm5y4A&s">
      <div>
        <div class="title">–ú–∞–≥–∞–∑–∏–Ω –ü—Ä–æ–¥—É–∫—Ç—ñ–≤</div>
        <div style="font-size:12px;color:var(--muted)">–®–≤–∏–¥–∫–æ. –ó—Ä—É—á–Ω–æ. –û–Ω–ª–∞–π–Ω.</div>
      </div>
    </div>

    <div class="controls">
      <input id="search" class="search" placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: —è–±–ª—É–∫–∞, –º–æ–ª–æ–∫–æ)...">
      <select id="category" class="select">
        <option value="all">–£—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</option>
      </select>
      <button id="openCart" class="cart-btn">–ö–æ—à–∏–∫ (<span id="cartCount">0</span>)</button>
    </div>
  </header>

  <main>
    <section>
      <h2 style="margin:6px 0 16px">–ü–æ–ø—É–ª—è—Ä–Ω—ñ —Ç–æ–≤–∞—Ä–∏</h2>
      <div id="products" class="grid"></div>
    </section>
  </main>

  <div id="overlay" class="overlay">
    <div class="cart" role="dialog" aria-modal="true">
      <div style="display:flex; justify-content:space-between; align-items:center">
        <h3>–í–∞—à –∫–æ—à–∏–∫</h3>
        <button id="closeCart" style="background:transparent;border:0;font-size:18px;cursor:pointer">‚úï</button>
      </div>
      <div class="cart-list" id="cartList"></div>
      <div style="display:flex; justify-content:space-between; align-items:center">
        <div style="font-weight:700">–†–∞–∑–æ–º: <span id="cartTotal">0</span> ‚Ç¥</div>
        <div style="display:flex; gap:8px">
          <button id="clearCart" style="padding:8px 10px;border-radius:8px;border:1px solid #e6e9ee;background:#fff">–û—á–∏—Å—Ç–∏—Ç–∏</button>
          <button id="checkout" class="add">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
        </div>
      </div>
    </div>
  </div>

  <footer>–¶–µ –¥–µ–º–æ-–º–∞–≥–∞–∑–∏–Ω. –î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å—Ö–æ–≤–∏—â—ñ –±—Ä–∞—É–∑–µ—Ä–∞.</footer>

  <script>
    // –ü—Ä–æ—Å—Ç—ñ –¥–∞–Ω—ñ —Ç–æ–≤–∞—Ä—ñ–≤
    const PRODUCTS = [
      {id:1,name:'–Ø–±–ª—É–∫–∞ (5 –∫–≥)',price:45,category:'–§—Ä—É–∫—Ç–∏',img:'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?q=80&w=600&auto=format&fit=crop&ixlib=rb-4.0.3&s=placeholder'},
      {id:2,name:'–ë–∞–Ω–∞–Ω–∏ (6 –∫–≥)',price:55,category:'–§—Ä—É–∫—Ç–∏',img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRhT7S5nNfO_uWMVk0IAs5YTzu6hHjJ0coLiA&s'},
      {id:3,name:'–ú–æ–ª–æ–∫–æ 1–ª',price:38,category:'–ú–æ–ª–æ—á–Ω—ñ',img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgP_W9EdV6vr1-Q2_mUZmMBNn0yfnoj4k1DQ&s'},
      {id:4,name:'–°–∏—Ä —Ç–≤–µ—Ä–¥–∏–π 300–≥',price:220,category:'–ú–æ–ª–æ—á–Ω—ñ',img:'https://nssz.com.ua/image/catalog/blog/17%20may%202017-min.jpg'},
      {id:5,name:'–•–ª—ñ–± –∂–∏—Ç–Ω—ñ–π(15 —à—Ç)',price:28,category:'–í–∏–ø—ñ—á–∫–∞',img:'https://monolit.te.ua/media/cache/4a/e9/4ae9467eabb2931b8e30eb821afbe69e.jpg'},
      {id:6,name:'–ö–∞—Ä—Ç–æ–ø–ª—è (8 –∫–≥)',price:20,category:'–û–≤–æ—á—ñ',img:'https://yaskravaklumba.com.ua/image/cache/catalog/semena/kartofel/corinna-2-500x500.jpg'},
      {id:7,name:'–ú–æ—Ä–∫–≤–∞ (12 –∫–≥)',price:22,category:'–û–≤–æ—á—ñ',img:'https://gardenclub.ua/wp-content/uploads/2023/01/2a234fbc76e45a9149bc55ef47b4a58a794cdb49-1.jpeg'},
      {id:8,name:'–Ø–π—Ü—è 10 —à—Ç',price:60,category:'–ú–æ–ª–æ—á–Ω—ñ',img:'https://golden-flamingo.com.ua/wp-content/uploads/2024/01/yajcz.jpg'}
    ];

    // State
    let cart = JSON.parse(localStorage.getItem('cart_demo') || '{}');

    // Init
    const productsEl = document.getElementById('products');
    const cartCount = document.getElementById('cartCount');
    const overlay = document.getElementById('overlay');
    const cartList = document.getElementById('cartList');
    const cartTotal = document.getElementById('cartTotal');
    const search = document.getElementById('search');
    const category = document.getElementById('category');

    function uniqueCategories(){
      const cats = Array.from(new Set(PRODUCTS.map(p=>p.category)));
      for(const c of cats){
        const opt = document.createElement('option'); opt.value = c; opt.textContent = c; category.appendChild(opt);
      }
    }

    function renderProducts(filter=''){
      const q = search.value.trim().toLowerCase();
      const cat = category.value;
      productsEl.innerHTML = '';
      const list = PRODUCTS.filter(p=>{
        if(cat!=='all' && p.category!==cat) return false;
        if(!q) return true;
        return p.name.toLowerCase().includes(q);
      });
      for(const p of list){
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <div class="imgwrap"><img src="${p.img}" alt="${p.name}"></div>
          <div class="name">${p.name}</div>
          <div class="meta"><div class="price">${p.price} ‚Ç¥</div><button class="add" data-id="${p.id}">–î–æ–¥–∞—Ç–∏</button></div>
        `;
        productsEl.appendChild(card);
      }
      // attach add handlers
      document.querySelectorAll('.add').forEach(btn=>btn.addEventListener('click',()=>{
        const id = btn.getAttribute('data-id'); addToCart(Number(id));
      }))
    }

    function saveCart(){ localStorage.setItem('cart_demo', JSON.stringify(cart)); updateCartUI(); }

    function addToCart(id){ cart[id] = (cart[id]||0)+1; saveCart(); }

    function removeFromCart(id){ delete cart[id]; saveCart(); }

    function changeQty(id, delta){ if(!cart[id]) return; cart[id]+=delta; if(cart[id]<=0) delete cart[id]; saveCart(); }

    function updateCartUI(){
      const items = Object.entries(cart).map(([id,q])=>({...PRODUCTS.find(p=>p.id==id),qty:q}));
      cartCount.textContent = items.reduce((s,i)=>s+i.qty,0);
      cartList.innerHTML = '';
      let total = 0;
      for(const it of items){
        total += it.price*it.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${it.img}" alt="${it.name}">
          <div style="flex:1">
            <div style="font-weight:600">${it.name}</div>
            <div style="color:var(--muted);font-size:13px">${it.price} ‚Ç¥ x ${it.qty} = ${it.price*it.qty} ‚Ç¥</div>
          </div>
          <div class="qty">
            <button data-id="${it.id}" class="dec">-</button>
            <div>${it.qty}</div>
            <button data-id="${it.id}" class="inc">+</button>
            <button data-id="${it.id}" class="rem" style="margin-left:8px;border:0;background:transparent;cursor:pointer">üóë</button>
          </div>
        `;
        cartList.appendChild(div);
      }
      cartTotal.textContent = total;
      // attach handlers
      cartList.querySelectorAll('.inc').forEach(b=>b.addEventListener('click',()=>changeQty(b.dataset.id,1)));
      cartList.querySelectorAll('.dec').forEach(b=>b.addEventListener('click',()=>changeQty(b.dataset.id,-1)));
      cartList.querySelectorAll('.rem').forEach(b=>b.addEventListener('click',()=>removeFromCart(b.dataset.id)));
    }

    // UI events
    document.getElementById('openCart').addEventListener('click',()=>{ overlay.style.display='flex'; updateCartUI(); });
    document.getElementById('closeCart').addEventListener('click',()=>overlay.style.display='none');
    document.getElementById('clearCart').addEventListener('click',()=>{ cart={}; saveCart(); });
    document.getElementById('checkout').addEventListener('click',()=>{
      if(Object.keys(cart).length===0){ alert('–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π'); return; }
      // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞
      alert('–î—è–∫—É—î–º–æ! –í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ (–¥–µ–º–æ).'); cart={}; saveCart(); overlay.style.display='none';
    });

    search.addEventListener('input', ()=> renderProducts());
    category.addEventListener('change', ()=> renderProducts());

    // Init run
    uniqueCategories(); renderProducts(); updateCartUI();
  </script>
</body>
</html>
